<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:fado="http://java.sun.com/jsf/composite/customs"
>
<h:outputScript library="js" name="pdfmake.min.js" />
<h:outputScript library="js" name="vfs_fonts.js" />
<h:outputScript library="js" name="indico.js" />

<p:outputPanel id="panelx1" styleClass="cleaner2">
	<p:panelGrid id="panelx2" columns="1" styleClass="cleaner2">
	    <p:panel styleClass="cleaner2">
		  <p:panelGrid styleClass="card"  columns="2" style="color: white; width: 100%;  padding: 0px 0px 0px; margin: 0px 0px 0px; color: white;" columnClasses="ui-grid-col-11,ui-grid-col-1">
 				<h:outputText style="color: white; float:right;" styleClass="content"  value="Descripci&#243;n y f&#243;rmula"/>
 				<h:form>
  				<h:commandLink actionListener="#{transferenciaBean.showHideMessageInformation}" style="float: right;">
  					<h:graphicImage value="./resources/images/17-MAS-01.svg" rendered="true" height="24" width="24" style="padding-top: 4px;"/>
  					<p:ajax update="@([id$=panelInformacion])"/>
  				</h:commandLink> 
  			</h:form>		
		  </p:panelGrid>
		</p:panel>
		<p:outputPanel id="panelInformacion" styleClass="cleaner2">
		    <p:outputPanel rendered="#{transferenciaBean.ocultarmostrar}" style="padding:0px 40px 0px 50px; margin:0px 10px 0px 50px;"> 
				<a style="max-width:80%;">
						Contribuir al bienestar de los colombianos mediante la preservaci&#243;n del poder adquisitivo de la moneda, 
						el apoyo al crecimiento económico sostenido, el aporte a la estabilidad financiera, el buen funcionamiento de los
						sistemas de pago y la adecuada gesti&#243;n cultural. 
				</a>
				<br/>
				<a style="color: #5E2129 !important; float: right;">Fórmula = (Base 2013 = 100, porcentaje)</a>
			  </p:outputPanel>	
		</p:outputPanel>
		<p:panelGrid id="panelfiltro" columns="4" style="width:100%; vertical-align: top !important;" styleClass="cleaner2">
					<p:outputPanel id="pvalor" style="padding: 0px 0px 0px 30px; vertical-align: top !important;">
							<p:outputPanel id="valorfiltro" styleClass="cleaner2">
									<p:panelGrid columns="3" columnClasses="ui-grid-col-9,ui-grid-col-1,ui-grid-col-2" styleClass="cleaner2">
										<h:form>
									  	  <p:outputPanel style="vertical-align: top !important;" styleClass="cleaner2">
												<p:panelGrid id="panelFiltros" columns="2" columnClasses="ui-grid-col-5,ui-grid-col-5" style="vertical-align: top !important;" styleClass="cleaner2">
									  		      <p:panelGrid columns="2" styleClass="cleaner2" columnClasses="ui-grid-col-2,ui-grid-col-10">
										  		    <p:outputLabel value="Periodo" styleClass="cleaner2" style="padding-top: 6px !important"/>
													<p:selectOneMenu id="selFiltroPorValor" widgetVar="selFiltroPorValorW" required="true"  autoWidth="false" value="#{transferenciaBean.tipoPeriodoSelected}"
																	requiredMessage="Seleccione Periodo" placeholder="Periodo" style="width: 100px;"
																	>
														<f:selectItem itemLabel="Diario" 		itemValue="1"/>
														<f:selectItem itemLabel="Mensual" 		itemValue="2"/>
														<f:selectItem itemLabel="Trimestral" 	itemValue="3"/>
														<f:selectItem itemLabel="Semestral" 	itemValue="4"/>
														<f:selectItem itemLabel="Anual" 		itemValue="5"/>
														<p:ajax process="@this" update="@([id$=panelesValoresDinamic],[id$=panelFiltros])" listener="#{transferenciaBean.changePanelAction}"/>
													</p:selectOneMenu>
												</p:panelGrid>
									  		    <p:panelGrid columns="2" styleClass="cleaner2" columnClasses="ui-grid-col-2,ui-grid-col-10">
										  		    <p:outputLabel value="Conceptos" styleClass="cleaner2" style="padding-top: 6px !important"/>
													<p:selectOneMenu value="#{transferenciaBean.concepto}" >
														<f:selectItem itemLabel="Conceptos" itemValue=""></f:selectItem>
														<f:selectItems value="#{transferenciaBean.conceptos}" var="concepto" itemLabel="#{concepto.label}" itemValue="#{concepto.value}"/>
														<p:ajax process="@this" update="@([id$=graficaTransaccion])" listener="#{transferenciaBean.changeConceptosAction}"/>
													</p:selectOneMenu>
												</p:panelGrid>	
												<p:messages id="messageinformationglobal" showDetail="false" autoUpdate="true"/>
											</p:panelGrid>
											
											<p:panelGrid columns="2" style="vertical-align: top !important; width: 65%;" columnClasses="ui-grid-col-10,ui-grid-col-2">
												<p:outputPanel id="panelesValoresDinamic" style="width: 100%;">
													<p:outputPanel id="pValorDiario" rendered="#{transferenciaBean.pintar==1}"> 
														<fado:aniomesdia idg="valperiodo1"  bean="#{transferenciaBean.valaniomesdiaP1}" tittle="Desde" remoteCommandView="#{transferenciaBean.validateGraficForDiario}" toUpdate="valorgraficavalor"/>
														<p:separator style="padding: 0px 0px 0px 0px; margin: 0 0 0 0;"/>	
														<fado:aniomesdia idg="valperiodo2"  bean="#{transferenciaBean.valaniomesdiaP2}" tittle="Hasta" remoteCommandView="#{transferenciaBean.validateGraficForDiario}" toUpdate="valorgraficavalor"/>	
													</p:outputPanel>
													<p:outputPanel id="pValorMensual" rendered="#{transferenciaBean.pintar==2}">
														<fado:aniomes idg="valmensual1"  bean="#{transferenciaBean.valaniomesP1}" tittle="Primer Periodo"  remoteCommandView="#{transferenciaBean.validateGraficForMensual}" toUpdate="valorgraficavalor"/>
														<p:separator style="padding: 0px 0px 0px 0px; margin: 0 0 0 0;"/>	
														<fado:aniomes idg="valmensual2"  bean="#{transferenciaBean.valaniomesP2}" tittle="Segundo Periodo"  remoteCommandView="#{transferenciaBean.validateGraficForMensual}" toUpdate="valorgraficavalor"/>	
													</p:outputPanel>
													<p:outputPanel id="pValorTrimestral" rendered="#{transferenciaBean.pintar==3}">
														<fado:aniotrimestre idg="valtrimestral1"  bean="#{transferenciaBean.valaniotrimestralP1}" tittle="Primer Periodo"  remoteCommandView="#{transferenciaBean.validateGraficForTrimestral}" toUpdate="valorgraficavalor"/>
														<p:separator style="padding: 0px 0px 0px 0px; margin: 0 0 0 0;"/>
														<fado:aniotrimestre idg="valtrimestral2"  bean="#{transferenciaBean.valaniotrimestralP2}" tittle="Segundo Periodo"  remoteCommandView="#{transferenciaBean.validateGraficForTrimestral}" toUpdate="valorgraficavalor"/>	
													</p:outputPanel>
													<p:outputPanel id="pValorSemestral" rendered="#{transferenciaBean.pintar==4}">
														<fado:aniosemestre idg="valsemestral1"  bean="#{transferenciaBean.valaniosemestralP1}" tittle="Primer Periodo"  remoteCommandView="#{transferenciaBean.validateGraficForSemestral}" toUpdate="valorgraficavalor"/>
														<p:separator style="padding: 0px 0px 0px 0px; margin: 0 0 0 0;"/>
														<fado:aniosemestre idg="valtrimestral2"  bean="#{transferenciaBean.valaniosemestralP2}" tittle="Segundo Periodo"  remoteCommandView="#{transferenciaBean.validateGraficForSemestral}" toUpdate="valorgraficavalor"/>	
													</p:outputPanel>
													<p:outputPanel id="pValorAnual" rendered="#{transferenciaBean.pintar==5}">
														<fado:anio idg="valanual1"  bean="#{transferenciaBean.valanioanualP1}" tittle="Primer Periodo"  remoteCommandView="#{transferenciaBean.validateGraficForAnual}" toUpdate="valorgraficavalor"/>
														<p:separator style="padding: 0px 0px 0px 0px; margin: 0 0 0 0;"/>
														<fado:anio idg="valanual2"  bean="#{transferenciaBean.valanioanualP2}" tittle="Segundo Periodo"  remoteCommandView="#{transferenciaBean.validateGraficForAnual}" toUpdate="valorgraficavalor"/>	
													</p:outputPanel>
												</p:outputPanel>
												<p:outputPanel style="width:120px;">
													<p:panelGrid columns="2" layout="grid" style="border:1px;">
															<h:outputText styleClass="ui-selectonemenu ui-widget ui-state-default ui-corner-all"
																	style="width: 80px !important; height: 100% !important; padding: 1px 1px 1px 2px;" 
																	value="Restaurar"/>
															<p:commandButton icon="icon-restaurar"  
																	process="@this"
																	update="@([id$=valorgraficavalor],[ID$=panelesValoresDinamic],[ID$=panelFiltros])" 
																	actionListener="#{transferenciaBean.restaurarAction}">
															</p:commandButton>
													</p:panelGrid>
												</p:outputPanel>	
											</p:panelGrid>		
										  </p:outputPanel>
										</h:form>
										<p:separator style="border: 1px solid #850024 !important; background: #850024; height: 80px; width: 1px; padding: 0px 0px 0px 0px; margin:0px 0px 0px 0px; float:inline-end;"/>
										<h:form id="frmExportar">	
										  	<p:outputPanel id="panelexportar">
										  		<p:panelGrid columns="2">
													<span class="ui-icon icon-download"></span>										  			
													<p:selectOneMenu onchange="exportChart(this.value);" styleClass="selectDownload">
										  				<f:selectItem itemLabel="Grafica" itemValue=""/>
										  				<f:selectItem itemLabel="JPG" itemValue="jpg"/>
										  				<f:selectItem itemLabel="PDF" itemValue="pdf"/>
										  			</p:selectOneMenu>
													<span class="ui-icon icon-download"></span>										  			
										  			<p:selectOneMenu value="#{transferenciaBean.tipoaexportar}">
										  				<f:selectItem itemLabel="Datos" itemValue=""/>
										  				<f:selectItem itemLabel="CSV" itemValue="csv"/>
										  				<f:selectItem itemLabel="XLS" itemValue="xls"/>
										  				<f:selectItem itemLabel="SDMX" itemValue="dsmx"/>
 										  				<p:ajax event="change" onsuccess="$('#frmExportar\\:downloadFile').click();"/> 
										  			</p:selectOneMenu>
													<p:commandButton id="downloadFile" widgetVar="downloadFileW"   value="Download" ajax="false" icon="fa fa-fw fa-cloud-download" actionListener="#{transferenciaBean.exportAction}" style="display: none;">
													</p:commandButton>
												</p:panelGrid>
										  	</p:outputPanel>
										</h:form>  	
									</p:panelGrid>
							</p:outputPanel>
							<p:panelGrid id="valorgraficavalor" columns="1" style="width: 100%; text-align: center;">
							  <h:form>
								<p:chart id="graficaTransaccion" widgetVar="graficaTransaccionW" type="line" model="#{transferenciaBean.lineModelTransferencia}" style="height:300px;" responsive="true" styleClass="chartcustom"/>
								<p:outputPanel style="width:100%; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 30px;">
									<center>
										<p:toolbar styleClass="toolbar-custom">
											<f:facet name="left">
												<p:commandButton icon="icon-before" styleClass="buttons-background" 
													actionListener="#{transferenciaBean.beforeGraficAction}" update="@([id$=valorgraficavalor])" process="@this">
												</p:commandButton>
									        </f:facet>
											<f:facet name="right">
												<p:commandButton icon="icon-next" styleClass="buttons-background" 
													actionListener="#{transferenciaBean.nextGraficAction}" update="@([id$=valorgraficavalor])" process="@this"/>
											</f:facet>
										</p:toolbar>
									</center>
								</p:outputPanel>
							  </h:form>	
						</p:panelGrid>
					</p:outputPanel>
			</p:panelGrid>
	</p:panelGrid>
</p:outputPanel>
<p:dialog widgetVar="dlg" showEffect="fade" modal="true" header="Grafica de Transacci&#243;n como Imagen" resizable="false">
    <p:outputPanel id="output" layout="block" style="width:500px;height:300px"/>
</p:dialog>	
</ui:composition>	    